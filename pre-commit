#!/usr/bin/env bash
# File generated by pre-commit: https://pre-commit.com
# ID: 138fd403232d2ddd5efb44317e38bf03

# start templated
if [ -f conda.env ]; then
    source conda.env
    if [ -n "$PRE_COMMIT_CONDA_ENV" ] && [ "$PRE_COMMIT_CONDA_ENV" != "$CONDA_DEFAULT_ENV" ]; then
        if ! conda --version >/dev/null 2>&1; then
            if [ -n "$PRE_COMMIT_CONDA_EXE" ] && [ -x "$PRE_COMMIT_CONDA_EXE" ]; then
                "$PRE_COMMIT_CONDA_EXE" init bash
                source ~/.bash_profile 
            else
                >&2 echo "Error: PRE_COMMIT_CONDA_EXE is not set or not executable."
                exit 1
            fi
        fi
        conda activate "$PRE_COMMIT_CONDA_ENV"
    fi
fi
for PYTHON_BIN in python python3; do
    if $PYTHON_BIN --version >/dev/null 2>&1; then
        INSTALL_PYTHON=$(which $PYTHON_BIN)
        break
    fi
done
if [ -z "$INSTALL_PYTHON" ]; then
    >&2 echo "Error: No suitable Python interpreter found. Please install Python and try again."
    exit 1
fi
ARGS=(hook-impl --hook-type=pre-commit)
# end templated

HERE="$(cd "$(dirname "$0")" && pwd)"
PRE_COMMIT_CONFIG="$HERE/.pre-commit-config.yaml"
if [ -f .pre-commit-config.yaml ]; then
    PRE_COMMIT_CONFIG=.pre-commit-config.yaml
fi
ARGS+=(--config="$PRE_COMMIT_CONFIG" --hook-dir "$HERE" -- "$@")

if [ -x "$INSTALL_PYTHON" ]; then
    exec "$INSTALL_PYTHON" -mpre_commit "${ARGS[@]}"
elif command -v pre-commit > /dev/null; then
    exec pre-commit "${ARGS[@]}"
else
    echo '`pre-commit` not found.  Did you forget to activate your virtualenv?' 1>&2
    exit 1
fi
